<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é˜²æŠ–å’ŒèŠ‚æµ</title>
  <style>
    .content-box {
      height: 300px;
    }
    .content-container {
        height: 1000px;
        background-color: rgba(53, 51, 51, 0.7);
    }
    .img-box {
        width: 200px;
        margin: 0 auto;
        height: 200px;
        animation: loading 2s linear 0s infinite normal none running;
    }
    .img-box img {
        width: 100%;
    }
    @keyframes loading {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
  </style>
</head>
<body>
    <div class="content-box">
        <h2>1.é˜²æŠ–ï¼š</h2>
        <span>ä¸€ä¸ªå¤§å‹åå°ç³»ç»Ÿ ç”¨æˆ·åœ¨æœç´¢æ¡†å†…è¾“å…¥éœ€è¦æŸ¥è¯¢çš„å­—æ®µä¿¡æ¯
            æŸ¥è¯¢çš„æ—¶å€™å°±å»è¯·æ±‚åå°è¿”å›çš„æ•°æ®çš„è¯ è¿™æ ·å¤šæ¬¡è¾“å…¥å°±ä¼šé¢‘ç¹
            åœ°å»è¯·æ±‚ajax å°±ä¼šé€ æˆå¡é¡¿ å› ä¸ºç”¨æˆ·è¾“å…¥å…·æœ‰è¿ç»­æ€§ å¯ä»¥ç­‰ç”¨æˆ·
            åœ¨è¾“å…¥åœé¡¿çš„æ—¶å€™å»è¯·æ±‚æ•°æ®</span>
        <p>æŠ–åŠ¨åœæ­¢åçš„æ—¶é—´è¶…è¿‡è®¾å®šçš„æ—¶é—´åæ‰§è¡Œä¸€æ¬¡å‡½æ•°</p>
        <label>æ²¡æœ‰åŠ é˜²æŠ–çš„</label><input type="text" id="ipt" /><br>
        <label>åŠ äº†é˜²æŠ–çš„</label><input type="text" id="ipt2" /><br>
    </div>
    <div class="content-box">
        <h2>2.èŠ‚æµ:</h2>
        <span>ä¸€ä¸ªåå°ç³»ç»Ÿä¸­ ç”¨æˆ·ä¸‹æ‹‰æ»šåŠ¨å»åŠ è½½åˆ†é¡µæ•°æ®çš„æ—¶å€™ å¦‚æœç”¨é˜²æŠ–çš„è¯
            åªèƒ½è®©ç”¨æˆ·åœä¸‹æ»šåŠ¨çš„æ—¶å€™æ‰å»è¯·æ±‚æ•°æ® è¿™ä¸ªåœºæ™¯æ˜¯ä¸åˆç†çš„ è€Œæ˜¯åªèƒ½
            è®©ç”¨æˆ·æ— é™åˆ¶æ»šåŠ¨ åœ¨æ»šåŠ¨çš„ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ® æ»šåŠ¨åé—´éš”ä¸€å®šæ—¶é—´å†…è¿˜è¦
            å»è¯·æ±‚æ•°æ®</span>
        <p>æŒ‰ç…§è®¾å®šçš„æ—¶é—´å›ºå®šæ‰§è¡Œä¸€æ¬¡å‡½æ•°</p>
        <label>åŠ äº†èŠ‚æµçš„</label><input type="text" id="ipt3" /><br>
    </div>
    <h3>æ€»ç»“ï¼š</h3>
    <p>é˜²æŠ–ä¸€èˆ¬ç”¨äºå¾ˆå¤šæ¬¡æ“ä½œ ä½†å¾ˆå¤šæ“ä½œéƒ½æ˜¯æ— æ•ˆçš„</p>
    <p>æ¯ä¸€æ¬¡æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ åœ¨waitç§’å†…æœ€å¤šæ‰§è¡Œä¸€æ¬¡å‡½æ•°</p>
    <div class="content-container">
        å°é£è½¦
        <div class="img-box">
            <img src="./imgs/fenche.png" class="loading">
        </div>
    </div>

    <script type="text/javascript">
        var ipt = document.getElementById('ipt');
        var ipt2 = document.getElementById('ipt2');
        var ipt3 = document.getElementById('ipt3');
        // function ajaxGetData() {
        //     console.log('%cğŸ–ğŸ–ğŸ–ğŸ–ğŸ–ğŸ–','color:#008B45;text-shadow:5px 5px 2px #fff, 5px 5px 2px #373E40, 5px 5px 5px #A2B4BA, 5px 5px 10px #82ABBA;font-weight:bolder;font-size:20px');
        //     console.log('å»è¯·æ±‚ajaxçš„æ•°æ®');
        // };
        ajaxGetData = (_ => {
            console.log('%cğŸ–ğŸ–ğŸ–ğŸ–ğŸ–ğŸ–','color:#008B45;text-shadow:5px 5px 2px #fff, 5px 5px 2px #373E40, 5px 5px 5px #A2B4BA, 5px 5px 10px #82ABBA;font-weight:bolder;font-size:20px');
            console.log('å»è¯·æ±‚ajaxçš„æ•°æ®');
        })
        // è¿™æ ·åœ¨è¾“å…¥çš„ä¸€ç¬é—´å°±ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•° è¿™æ˜¯ä¸å¿…è¦çš„
        ipt.addEventListener('input', ajaxGetData, false);
        ipt2.addEventListener('input', debounceDZ1(ajaxGetData,1000), false);
        ipt3.addEventListener('input', throttle(ajaxGetData,1000), false);
        // fn ä¸ºä¼ å…¥çš„å‡½æ•° wait ä¸ºè®¾å®šçš„æ—¶é—´é—´éš”
        /**
        * ç‰¹ç‚¹æ˜¯ä¸æ–­åˆ·æ–°å®šæ—¶å™¨
        * é˜²æŠ–å‡½æ•°åœ¨é¦–æ¬¡æ‰§è¡Œçš„æ—¶å€™ ä¼šæŠŠå®šæ—¶å™¨èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡
        * ç¬¬äºŒæ¬¡æ‰§è¡Œçš„æ—¶å€™ å¦‚æœé—´éš”æ²¡æœ‰è¶…è¿‡å®šæ—¶å™¨è®¾å®šçš„æ—¶é—´åˆ™ä¼šæ¸…é™¤æ‰å®šæ—¶å™¨ å¹¶é‡æ–°è®¾ç½®å®šæ—¶å™¨ ä¾æ¬¡é‡å¤
        * å½“ç”¨æˆ·åœæ­¢æ“ä½œçš„æ—¶å€™ ä¸ä¼šæ¸…é™¤å®šæ—¶å™¨ è¶…è¿‡ä¸€å®šæ—¶é—´åæ‰§è¡Œå›è°ƒå‡½æ•°
        */
        // ç¬¬ä¸€ç‰ˆ thisæŒ‡å‘çš„æ˜¯ window
        function debounceDZ1(fn, wait) {
            var timer = null;
            return function () {
                if (timer) clearTimeout(timer);
                    timer = setTimeout(fn, wait);
            }
        }
        // ç¬¬äºŒç‰ˆ ç»‘å®šä¸Šä¸‹æ–‡this å¹¶ä¸”å¯æ‹¿åˆ°äº‹ä»¶å¯¹è±¡ event
        function debounceDZ2(fn, wait) {
            var timer = null;
            return function() {
                if (timer) clearTimeout(timer);
                    timer = setTimeout(function () {
                        fn.apply(this, arguments)
                    }, wait);
            }
        }
        // ç¬¬ä¸‰ç‰ˆ æ˜¯å¦ç«‹å³æ‰§è¡Œ
        function debounceDZ3(fn, wait, immediate) {
            var timer = null;
            return function() {
                if (timer) clearTimeout(timer);
                if (immediate) {
                    // å¦‚æœå·²ç»æ‰§è¡Œè¿‡ ä¸å†æ‰§è¡Œ ç»‘å®šä¸Šä¸‹æ–‡æŒ‡å®šçš„this
                    !timer && fn.apply(this, arguments);
                    // å¯åŠ¨å®šæ—¶å™¨ waitæ—¶é—´è¿‡åçš„åŠ¨ä½œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ¬¡
                    timer = setTimeout(function () {
                        timer = null;
                    }, wait)
                } else {
                    timer = setTimeout(function () {
                        fn.apply(this, arguments);
                    }, wait);
                }
            }
        }

        function getScrollTop() {
            var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
            console.log(scrollTop,'å»è¯·æ±‚ä¸‹æ‹‰åŠ è½½çš„æ•°æ®');
        }

        window.addEventListener('scroll', getScrollTop, false);
        window.addEventListener('scroll', throttle(getScrollTop,1000), false);

        // æŒ‰ç…§æŒ‡å®šçš„å‘¨æœŸæ¥è°ƒç”¨å‡½æ•° è¿™ä¸ªæ–¹æ³•ä¼šä¸åœçš„è°ƒç”¨
        // è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ å½“é—´éš”çš„æ—¶é—´å°äºå‡½æ•°å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´ ä»£ç å°±ä¸ä¼šæ‰§è¡Œ
        setInterval(debounceDZ3(ajaxGetData,1000), 500);
        // setInterval(debounceDZ3(ajaxGetData,1000), 2000);
        // setInterval(throttle(ajaxGetData,1000), 500);
        /**
         * æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªå¼€å…³ï¼Œæ§åˆ¶ç€åŠ¨ç”»çš„è¿è¡Œã€‚å°±åƒé˜€ä¸€æ ·ï¼Œé˜€å¼€ç€æ°´æ‰èƒ½æµå‡ºã€‚
         * åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ä¸€ä¸ª(é˜€)flag=true;ã€‚åœ¨äº‹ä»¶çš„å¼€å¤´å¤„ï¼Œåˆ¤æ–­if(flag){flag=false;do somenthing}
         * é˜€æ‰“å¼€çš„æƒ…å†µä¸‹è¿è¡Œå‡½æ•°ï¼Œå¹¶ä¸”æŠŠå¼€ç€çš„æ°´é¾™å¤´å…³æ‰flag=false;è®©äº‹ä»¶æ— æ³•è¿ç»­è§¦å‘ï¼Œæœ€åäº‹ä»¶ç»“å°¾åˆ¤æ–­åŠ¨ç”»å¦‚æœç»“æŸï¼Œå†æ‰“å¼€é˜€flag=trueã€‚
         * æ•ˆæœï¼šå¦‚æœçŸ­æ—¶é—´å†…å¤§é‡è§¦å‘åŒä¸€äº‹ä»¶ è®©å‡½æ•°æ‰§è¡Œä¸€æ¬¡å è®©å‡½æ•°åœ¨æŒ‡å®šçš„æ—¶é—´å†…ä¸å†å·¥ä½œ ç›´è‡³è¿‡äº†è¿™æ®µæ—¶é—´åæ‰é‡æ–°ç”Ÿæ•ˆ
         */
        function throttle(fn, wait) {
            var flag = true;
            return function () {
                if (flag) {
                    flag = false;
                    setTimeout(function () {
                        fn.apply(this, arguments);
                        flag = true;
                    }, wait)
                }
            }
        }
    </script>
</body>
</html>