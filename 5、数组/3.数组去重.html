<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>å»é‡çš„æ–¹æ³•</title>
  <style>
    .content-box {
      text-align: center;
    }

    sub {
      color: #f40;
    }

    h1 {
      text-align: center;
    }
  </style>
</head>

<body>
  <h1>æ•°ç»„çš„å»é‡æ–¹æ³•</h1>
  <div class="content-box">
    <h2>1.æ•°ç»„çš„å»é‡ Set()</h2>
    <sub>æ–°æ•°æ®ç»“æ„Set ç±»ä¼¼äºæ•°ç»„ ä½†æˆå‘˜å€¼ä¸é‡å¤</sub>
  </div>

  <h1>æ•°ç»„å¯¹è±¡å¦‚ä½•å»é‡</h1>
  <div class="content-box">
    <h2>2.æ•°ç»„å¯¹è±¡å»é‡ reduce()</h2>
    <sub>æ¥æ”¶ä¸€ä¸ªå‡½æ•°æœ€ä¸ºç´¯åŠ å™¨ æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ä»å·¦åˆ°å³å¼€å§‹åˆå¹¶ æœ€åè¿”å›ä¸€ä¸ªå€¼</sub>
    <p>reduce() å…¶å®ä¹Ÿå°±æ˜¯å¯¹æ•°ç»„ä»å·¦è‡³å³è¿›è¡Œéå† åœ¨éå†çš„åŒæ—¶æŒ‰ç…§å›è°ƒå‡½æ•°ä¸­çš„æ–¹æ³•è¿›è¡Œå¤„ç† å…¶ç‰¹åˆ«ä¹‹å¤„å°±åœ¨äºå®ƒæ¯æ¬¡éå†ä¸€ä¸ªå…ƒç´ åå°±ä¼šå°†è¿™ä¸ªå…ƒç´ æ”¾åœ¨ç´¯åŠ å™¨ä¸­ç´¯ç§¯èµ·æ¥ ç±»ä¼¼äºæ”¶å‰²æœºæ”¶å°éº¦ä¸€æ · ä»å·¦è‡³å³æ”¶å‰²
      æ”¶å‰²æœºä¸­ç”¨æ¥æ”¾æ”¶å‰²å¥½å°éº¦çš„åœ°æ–¹å°±ç±»ä¼¼äºreaduce()çš„ç´¯åŠ å™¨ æœ€åæ»¡æ»¡æ”¶å¥½çš„ä¸€å¤§è¢‹å°éº¦å°±ç±»ä¼¼äºreduce()çš„è¿”å›å€¼</p>
    <p>åº”ç”¨åœºæ™¯ï¼š
      1.ç§»åŠ¨ç«¯ input è¾“å…¥æ¡† è¾“å…¥æŸä¸ªå…³é”®è¯åï¼Œé€‰ä¸­å¯¹åº”é€‰é¡¹åï¼Œcheckbox ä¸ºå‹¾é€‰çŠ¶æ€ï¼Œæäº¤å‹¾é€‰åçš„æ•°æ®ã€‚å†æ¬¡è¾“å…¥æŸä¸ªå…³é”®è¯ï¼Œå¦‚æœé€‰ä¸­ç›¸åŒçš„é€‰é¡¹ï¼Œéœ€è¦æ’é™¤ä¸Šæ¬¡é€‰ä¸­çš„é€‰é¡¹ã€‚
    </p>
  </div>

  <script>
    let arr1 = ['å¤§', 'å¤§çŒª', 'å¤§å°', 'å¤§', 'å¤§å°', 'çŒª', 1, 22, 33, 22, 1, 6, 8, 88, 33];
    console.log(arr1);
    // æ•°ç»„è½¬set
    // new Set() æ¥å—ä¸€ä¸ªæ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡ 
    let set = new Set(arr1);

    // set è‡ªå¸¦å»é‡
    console.log([...set]);
    // setè½¬array
    // æŠŠç±»æ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡è½¬åŒ–ä¸ºæ•°ç»„ ï¼ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æµ…æ‹·è´æ•°ç»„å®ä¾‹ï¼‰
    console.log(Array.from(set));

    // å¯¹è±¡çš„å±æ€§ä¸ä¼šé‡å¤ ï¼ˆæŠŠæ•°ç»„çš„å€¼ä½œä¸ºå¯¹è±¡çš„é”®ï¼‰
    let obj = {};
    let newArr = [];
    // arr1.forEach(v => {
    //   if (!obj[v]) {
    //     // ç»™å¯¹è±¡çš„æŸä¸ªå±æ€§èµ‹å€¼ èµ‹ä¸èµ‹å€¼æ— æ‰€è°“ èµ‹æˆå¤šå°‘éƒ½å¯ä»¥ ä¸€èˆ¬ä¸º1
    //     obj[v] = 1;
    //     newArr.push(v);
    //   }
    // })
    for (let i = 0; i < arr1.length; i++) {
      if (!obj[arr1[i]]) {
        obj[arr1[i]] = true
        // debugger
        newArr.push(arr1[i])
      }
    }
    console.log('å»é‡åçš„ç»“æœ>>>', newArr);

    // å¦‚ä½•å°†ä¸‹é¢dataæ•°ç»„ä¸­idé‡å¤çš„æ•°æ®å»æ‰ï¼Ÿ
    let data = [{
        id: 201801,
        name: 'å¼ ä¸‰',
        age: 15,
      },
      {
        id: 201804,
        name: 'John',
        age: 18,
      },
      {
        id: 201802,
        name: 'æå››',
        age: 18,
      },
      {
        id: 201801,
        name: 'å¼ ä¸‰',
        age: 15,
      },
      {
        id: 201805,
        name: 'Jack',
        age: 18,
      },
      {
        id: 201803,
        name: 'ç‹äº”',
        age: 10,
      },
      {
        id: 201805,
        name: 'Jack',
        age: 18,
      },
      {
        id: 201804,
        name: 'John',
        age: 18,
      },
      {
        id: 201805,
        name: 'Jack',
        age: 18,
      },
    ];

    // 1.ä¸¤ä¸ªforå¾ªç¯ å°†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ å’Œå‰©ä½™å…ƒç´ è¿›è¡Œä¸€ä¸€æ¯”è¾ƒ å¦‚æœå‘ç°å‰©ä½™å…ƒç´ å‡ºç°idç›¸åŒçš„é¡¹ å°±åˆ©ç”¨splice() æ–¹æ³•åˆ é™¤è¿™ä¸€é¡¹ 
    function removeRepeat(arr, key) { 
      for (let i = 0; i < arr.length - 1; i++) {
        for (let j = i + 1; j < arr.length; j++) {
          if (arr[i][key] === arr[j][key]) {
            arr.splice(j,1)
            // å½“åˆ é™¤äº†å½“å‰ j æ‰€åœ¨çš„å…ƒç´ ä»¥åï¼Œåè¾¹çš„å…ƒç´ ä¼šè‡ªåŠ¨è¡¥ä½
            // å› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šæ”¹å˜æ•°ç»„é•¿åº¦ï¼Œè®©æ•°ç»„é•¿åº¦å‡å° 1ï¼Œæ‰€ä»¥ç›´æ¥ j++ ä¼šæ¼æ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¦ j--
            j--
          }
        }
      }
      return arr;
     }
    //  console.log(removeRepeat(data, 'id'));

    function abc(arr) {
      let obj = {}
      for (let i of arr) {
        obj[i] = true;
      }
      console.log(obj);
      return Object.keys(obj);
    }
    console.log('ğŸ“ğŸ“ğŸ“ğŸ“ğŸ“ğŸ“', abc(arr1));
    
    // 2.é€šè¿‡reduce() æ–¹æ³•çš„ç´¯ç§¯å™¨ä½œç”¨ åœ¨å¯¹æ•°ç»„å¯¹è±¡è¿›è¡Œéå†çš„æ—¶å€™ é€šè¿‡hashå¯¹è±¡æ ‡è®° æ•°ç»„ä¸­ æ¯ä¸ªå…ƒç´ idæ˜¯å¦å‡ºç°è¿‡
    // å¦‚æœæ²¡æœ‰ å½“å‰éå†åˆ°çš„å…ƒç´ å°±ä¼šæ”¾åˆ°ç´¯åŠ å™¨ä¸­ å¦åˆ™ä¸ä¼šæ”¾å…¥
    function removeRepeatByReduce(arr, key) {
      // å¯¹è±¡ä¸­å­˜å‚¨çš„å¿…é¡»æ˜¯é”®å€¼å¯¹ è¿™æ ·å®¹æ˜“åˆ¤æ–­å¯¹è±¡é‡Œé¢æœ‰æ²¡æœ‰è¿™ä¸ªé”® æ‰€ä»¥å¯¹è±¡çš„é”® å¿…é¡»å¯¹åº”ä¸€ä¸ªå€¼
      let hash = {};
      // reduceæ–¹æ³•è¿”å›çš„æ˜¯æœ€åä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°çš„è¿”å›å€¼
      arr = arr.reduce((pre,cur) => {
        // hash[cur[key]] ? '' : hash[cur[key]] = true && pre.push(cur);
        // å½“å¯¹è±¡é‡Œæ²¡æœ‰æ‰€ä¼ å±æ€§æ—¶ï¼Œç»™å±æ€§èµ‹å€¼ true å¹¶ push è¿›æ•°ç»„
        if (!hash[cur[key]]) {
          // å–ä¸åˆ°å€¼ è¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°
          hash[cur[key]] = true
          pre.push(cur)
        }
        return pre
      }, [])
      return arr
    }

    // ä¸Šé¢çš„ [] è¡¨ç¤ºåˆå§‹å€¼    
    console.log(removeRepeatByReduce(data, 'id'));

    // 3.Mapå¯¹è±¡ é”®å€¼å¯¹é›†åˆï¼Œkey å€¼ä¸ä»…å¯ä»¥æ˜¯å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯å…¶å®ƒå„ç§ç±»å‹çš„å€¼åŒ…æ‹¬å¯¹è±¡ä¹Ÿå¯ä»¥æˆä¸º Map çš„é”®
    // has æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­
    function removeRepeatByMap(arr, key) {
      let map = new Map()
      for (const obj of arr ) {
        if (!map.has(obj[key])) {
          // set æ–¹æ³• è®¾ç½®é”®å key å¯¹åº”çš„å‡å€¼ä¸º value 
          map.set(obj[key],obj)
        }
      }
      return [...map.values()]
    }

    console.log(removeRepeatByMap(data, 'id'));

    /* å‚è€ƒé“¾æ¥:
    1.https://www.jianshu.com/p/5c672a7a8b0b
    2.https://blog.csdn.net/xum222222/article/details/80657316
    3.https://www.jianshu.com/p/6fe808019416
    4.https://blog.csdn.net/qq_41657790/article/details/87535619
    5.https://zhidao.baidu.com/question/2117374649677753947.html
    6.https://www.jianshu.com/p/7c12cbaa817b
    */
  </script>
</body>

</html>