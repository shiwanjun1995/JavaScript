<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é˜²æŠ–å’ŒèŠ‚æµ</title>
  <style>
    .content-box {
      height: 300px;
      background-color: #cff;
    }
    .content-container {
        height: 1000px;
        background-color: rgba(53, 51, 51, 0.7);
    }
    .img-box {
        width: 200px;
        margin: 0 auto;
        height: 200px;
        animation: loading 2s linear 0s infinite normal none running;
    }
    .img-box img {
        width: 100%;
    }
    @keyframes loading {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
  </style>
</head>
<body>
    <h1>åœºæ™¯</h1>
    <span>ä¸€ä¸ªå¤§å‹åå°ç³»ç»Ÿ ç”¨æˆ·åœ¨æœç´¢æ¡†å†…è¾“å…¥éœ€è¦æŸ¥è¯¢çš„å­—æ®µä¿¡æ¯
        æŸ¥è¯¢çš„æ—¶å€™å°±å»è¯·æ±‚åå°è¿”å›çš„æ•°æ®çš„è¯ è¿™æ ·å¤šæ¬¡è¾“å…¥å°±ä¼šé¢‘ç¹
        åœ°å»è¯·æ±‚ajax å°±ä¼šé€ æˆå¡é¡¿ å› ä¸ºç”¨æˆ·è¾“å…¥å…·æœ‰è¿ç»­æ€§ å¯ä»¥ç­‰ç”¨æˆ·
        åœ¨è¾“å…¥åœé¡¿çš„æ—¶å€™å»è¯·æ±‚æ•°æ®</span>
    <div class="content-box">
            <h2>1.é˜²æŠ–ï¼š</h2>
            <p>æŠ–åŠ¨åœæ­¢åçš„æ—¶é—´è¶…è¿‡è®¾å®šçš„æ—¶é—´åæ‰§è¡Œä¸€æ¬¡å‡½æ•°</p>
        <input type="text" id="ipt" /><br>
        <input type="text" id="ipt2" /><br>
    </div>
    <div class="content-container">
        å°é£è½¦
        <div class="img-box">
            <img src="./imgs/fenche.png" class="loading">
        </div>
    </div>

    <script type="text/javascript">
        var ipt = document.getElementById('ipt');
        var ipt2 = document.getElementById('ipt2');
        // function ajaxGetData() {
        //     console.log('%cğŸ–ğŸ–ğŸ–ğŸ–ğŸ–ğŸ–','color:#008B45;text-shadow:5px 5px 2px #fff, 5px 5px 2px #373E40, 5px 5px 5px #A2B4BA, 5px 5px 10px #82ABBA;font-weight:bolder;font-size:20px');
        //     console.log('å»è¯·æ±‚ajaxçš„æ•°æ®');
        // };
        ajaxGetData = (_ => {
            console.log('%cğŸ–ğŸ–ğŸ–ğŸ–ğŸ–ğŸ–','color:#008B45;text-shadow:5px 5px 2px #fff, 5px 5px 2px #373E40, 5px 5px 5px #A2B4BA, 5px 5px 10px #82ABBA;font-weight:bolder;font-size:20px');
            console.log('å»è¯·æ±‚ajaxçš„æ•°æ®');
        })
        // è¿™æ ·åœ¨è¾“å…¥çš„ä¸€ç¬é—´å°±ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•° è¿™æ˜¯ä¸å¿…è¦çš„
        ipt.addEventListener('input', ajaxGetData, false);

        // fn ä¸ºä¼ å…¥çš„å‡½æ•° wait ä¸ºè®¾å®šçš„æ—¶é—´é—´éš”
        /**
        * èŠ‚æµå‡½æ•°åœ¨é¦–æ¬¡æ‰§è¡Œçš„æ—¶å€™ ä¼šæŠŠå®šæ—¶å™¨èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡
        * ç¬¬äºŒæ¬¡æ‰§è¡Œçš„æ—¶å€™ å¦‚æœé—´éš”æ²¡æœ‰è¶…è¿‡å®šæ—¶å™¨è®¾å®šçš„æ—¶é—´åˆ™ä¼šæ¸…é™¤æ‰å®šæ—¶å™¨ å¹¶é‡æ–°è®¾ç½®å®šæ—¶å™¨ ä¾æ¬¡é‡å¤
        * å½“ç”¨æˆ·åœæ­¢æ“ä½œçš„æ—¶å€™ ä¸ä¼šæ¸…é™¤å®šæ—¶å™¨ è¶…è¿‡ä¸€å®šæ—¶é—´åæ‰§è¡Œå›è°ƒå‡½æ•°
        */

        // ç¬¬ä¸€ç‰ˆ thisæŒ‡å‘çš„æ˜¯ window
        function debounceDZ1(fn, wait) {
            var timer = null;
            return function () {
                if (timer) clearTimeout(timer);
                console.log(this);
                    timer = setTimeout(fn, wait);
            }
        }

        // ç¬¬äºŒç‰ˆ ç»‘å®šä¸Šä¸‹æ–‡this å¹¶ä¸”å¯æ‹¿åˆ°äº‹ä»¶å¯¹è±¡ event
        function debounceDZ2(fn, wait) {
            var timer = null;
            return function() {
                if (timer) clearTimeout(timer);
                console.log(this);
                    timer = setTimeout(function () {
                        fn.apply(this, arguments)
                    }, wait);
            }
        }

        // ç¬¬ä¸‰ç‰ˆ æ˜¯å¦ç«‹å³æ‰§è¡Œ
        function debounceDZ3(fn, wait, immediate) {
            var timer = null;
            return function() {
                if (timer) clearTimeout(timer);
                if (immediate) {
                    // å¦‚æœå·²ç»æ‰§è¡Œè¿‡ ä¸å†æ‰§è¡Œ
                    !timer && fn.apply(this, arguments);
                    // å¯åŠ¨å®šæ—¶å™¨ waitæ—¶é—´è¿‡åçš„åŠ¨ä½œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ¬¡
                    timer = setTimeout(function () {
                        timer = null;
                    }, wait)
                } else {
                    timer = setTimeout(function () {
                        fn.apply(this, arguments);
                    }, wait);
                }
            }
        }
        ipt2.addEventListener('input', debounceDZ1(ajaxGetData,1000), false);
        function getScrollTop() {
            var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
            console.log(scrollTop);
        }
        window.addEventListener('scroll', getScrollTop, false);
    </script>
</body>
</html>